import matplotlib.pyplot as plt

x = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]


def draw_p50():
    conn_2 = [998,984,1092,1155,1121,1145, 1162,1123, 1314,1221,1049,1152,1125,1048,1232,1387,1109,1422,1048,1119,1218, 1135, 1074, 1179, 1033,1132,1134,1159,1188,1289,1181,1184,1083,1140,1056,1241,1277,1353, 1302]
    conn_4 = [1328,1342,1135,1482, 1432,1303,1544,1462, 1666, 1600,1389, 1435, 1479, 1414, 1680, 1981, 1471,1879,1413, 1486, 1634, 1682, 1474,1580, 1411,1462,1498, 1605, 1649, 1625, 1494,1544, 1449, 1543,1408, 1610, 1723,1845, 1750]
    conn_8 = [2023,1706,1723,1891,1733, 2018,2437,2407,2721, 2563,2283,2634,2492,2427,2829,3254,2343,2881,2328, 2407,2658, 2725, 2378, 2645, 2314,2344, 2393,2776,2726,2570,2471, 2527, 2355,2515,2378,2559, 2803, 2955, 2906]
    conn_16 = [2876,2569, 3097,3003, 3277, 3563,4156, 4242, 5198, 4914, 4199,4681,4666, 4316,4845, 5672, 4205,5441, 4096, 4333, 4657, 4957, 4195, 4602, 4126,4159, 4185, 4692,4866, 4545, 4653, 4549,  4154, 4153, 4193,4618,5235, 5403, 5356]
    conn_32 = [5390,4556,5309, 5166,5156, 5192,7517, 8264,9120, 8763,8027, 8124, 8279,7369,9355,10283, 8083,9704, 7669,8227,8614, 8969,7848,8193,7608,7634,8035,8279, 9253,8425,8445,8532,7539,7475,7299,8652,9364,9537, 10057]
    conn_64 = [8457,8157,7682,9318,9277,8510,14662,15875,16376,16252,14777,15481,15883,14272,18042,19876,15131,18587,15117,15655,16421,15826,15766,15324,15349,15370,15605,15427,17201,15880,15577,15959,15288,15622,14066,16077,16773,17665,18139]

    # conn_2 = [0.998, 0.984, 1.092, 1.155, 1.121, 1.145, 1.162, 1.123, 1.314, 1.221, 1.049, 1.152, 1.125, 1.048, 1.232, 1.387, 1.109, 1.422,
    #           1.048, 1.119, 1.218, 1.135, 1.074, 1.179, 1.033, 1.132, 1.134, 1.159, 1.188, 1.289, 1.181, 1.184, 1.083, 1.140, 1.056,
    #           1.241, 1.277, 1.353, 1.302]
    # conn_4 = [1.328, 1.342, 1.135, 1.482, 1.432, 1.303, 1.544, 1.462, 1.666, 1.600, 1.389, 1.435, 1.479, 1.414, 1.680, 1.981, 1.471,
    #           1.879, 1.413, 1.486, 1.634, 1682, 1474, 1580, 1411, 1462, 1498, 1605, 1649, 1625, 1494, 1544, 1449, 1543,
    #           1408, 1610, 1723, 1845, 1750]
    # conn_8 = [2023, 1706, 1723, 1891, 1733, 2018, 2437, 2407, 2721, 2563, 2283, 2634, 2492, 2427, 2829, 3254, 2343,
    #           2881, 2328, 2407, 2658, 2725, 2378, 2645, 2314, 2344, 2393, 2776, 2726, 2570, 2471, 2527, 2355, 2515,
    #           2378, 2559, 2803, 2955, 2906]
    # conn_16 = [2876, 2569, 3097, 3003, 3277, 3563, 4156, 4242, 5198, 4914, 4199, 4681, 4666, 4316, 4845, 5672, 4205,
    #            5441, 4096, 4333, 4657, 4957, 4195, 4602, 4126, 4159, 4185, 4692, 4866, 4545, 4653, 4549, 4154, 4153,
    #            4193, 4618, 5235, 5403, 5356]
    # conn_32 = [5390, 4556, 5309, 5166, 5156, 5192, 7517, 8264, 9120, 8763, 8027, 8124, 8279, 7369, 9355, 10283, 8083,
    #            9704, 7669, 8227, 8614, 8969, 7848, 8193, 7608, 7634, 8035, 8279, 9253, 8425, 8445, 8532, 7539, 7475,
    #            7299, 8652, 9364, 9537, 10057]
    # conn_64 = [8457, 8157, 7682, 9318, 9277, 8510, 14662, 15875, 16376, 16252, 14777, 15481, 15883, 14272, 18042, 19876,
    #            15131, 18587, 15117, 15655, 16421, 15826, 15766, 15324, 15349, 15370, 15605, 15427, 17201, 15880, 15577,
    #            15959, 15288, 15622, 14066, 16077, 16773, 17665, 18139]

    # dpi = 100
    # plt.figure(figsize=(1138/dpi, 871/dpi), dpi=dpi)
    plt.plot(x, conn_2, color='red', linestyle='dashed', marker='o', label='conn-2')
    plt.plot(x, conn_4, color='blue', linestyle='dashed', marker='o', label='conn-4')
    plt.plot(x, conn_8, color='yellow', linestyle='dashed', marker='o', label='conn-8')
    plt.plot(x, conn_16, color='black', linestyle='dashed', marker='o', label='conn-16')
    plt.plot(x, conn_32, color='pink', linestyle='dashed', marker='o', label='conn-32')
    plt.plot(x, conn_64, color='green', linestyle='dashed', marker='o', label='conn-64')
    plt.grid()

    plt.plot(x, conn_2, color='red')
    for a, b in zip(x, conn_2):
        plt.text(a, b, str(b))

    plt.plot(x, conn_4, color='blue')
    for a, b in zip(x, conn_4):
        plt.text(a, b, str(b))

    plt.plot(x, conn_8, color='yellow')
    for a, b in zip(x, conn_4):
        plt.text(a, b, str(b))

    plt.plot(x, conn_16, color='black')
    for a, b in zip(x, conn_16):
        plt.text(a, b, str(b))

    plt.plot(x, conn_32, color='pink')
    for a, b in zip(x, conn_32):
        plt.text(a, b, str(b))

    plt.plot(x, conn_64, color='green')
    for a, b in zip(x, conn_64):
        plt.text(a, b, str(b))

    # title = "1.5-alpha.afe8e4a0f00e8baa80e19d92cead0284529d5006_p50"
    # plt.title(title + '1000QPS over 240 seconds')
    plt.ylabel('latency,microseconds')
    plt.xlabel('days')
    plt.legend()
    plt.axis([0, 45, 0, 28000])

    # plt.savefig("istio-1_5_p50.png", dpi=dpi)
    plt.show()

draw_p50()